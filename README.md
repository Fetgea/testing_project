# Скрипт для работы с БД - книги
## Установка
Проверка работы скрипта проводилась со следующими версиями ПО 
- MySQL-server (v.8.0.22)
- PHP v.7.4.16

Необходимо расположить все файлы в одной директории, внести данные для подключения к БД в файл config.ini (на момент инициализации бд и таблицы название БД можно опустить).
Для запуска инициализации необходимо запустить скрипт create_db.php, при этом файлы config.ini, functions.php должны быть расположены в той же директории, что и create_db.php В случае успешной инициализации БД будет показано сообщение: "Success!" и в базе данных будет создана БД с именем books и одной таблицей book (на данном этапе необходимо прописать её название в config.ini), в остальных случаях будет отображена ошибка.


## Работа со скриптом
В скрипте в файле function.php определены 3 функции для работы с БД:
- getById
- getAllBooks
- createNewBook

Для правильной работы необходимо подключить файл function.php в своем скрипте, при этом в той же директории должен находиться файл config.ini с заполненными данными для подключения к БД.

### getById
Функция getById принимает на вход ID книги в базе данных и возвращает информацию об этой книге, если ID существует в базе, в противном случае будет возвращена ошибка.
Имена полей возвращаемых значений совпадают с именами полей БД:
- ID
- title
- author
- publication_date
- number_pages

### getAllBooks
Функция возвращает список всех книг в базе данных. Имена полей возвращаемых значений совпадают с именами полей БД:
- ID
- title
- author
- publication_date
- number_pages

### createNewBook
Создает новую запись в таблице books. На вход принимает значения:
- Название книги
- Имя автора
- Дата публикации (таймстамп)
- Количество страниц в книге (значение типа int)

Все передаваемы в функцию параметры не должны быть пусты, порядок передачи параметров указан выше.

### Ошибки
Все функции возвращают ошибки в следующем формате
```sh
["error" => "Текст ошибки"]
```

## Примеры вызовов функций

Все выводы в примерах предполагают, вызов функций сразу после инициализации БД.

### Вызов getById

```sh
$result = getById(2);
```

Результате выполнения данной функции в переменной $result будет значение:
```sh
Array
(
    [id] => 2
    [title] => PROBA
    [author] => Check
    [publication_date] => 2015-12-12
    [number_pages] => 456
)
```

### Вызов getAllBooks

```sh
$result = getAllBooks();
```
Результате выполнения данной функции в переменной $result будет значение:

```sh
Array
(
    [0] => Array
        (
            [id] => 1
            [title] => Check
            [author] => me
            [publication_date] => 1994-10-12
            [number_pages] => 324
        )

    [1] => Array
        (
            [id] => 2
            [title] => PROBA
            [author] => Check
            [publication_date] => 2015-12-12
            [number_pages] => 456
        )

    [2] => Array
        (
            [id] => 3
            [title] => Rugrats
            [author] => Andrew Sapkovski
            [publication_date] => 2010-01-06
            [number_pages] => 300
        )

)
```

### Вызов createNewBook 

Добавим книгу Джорджа Оруэлла, "1984. Скотный двор", дата публикации 2020-03-15 (будем использовать таймстамп - 1584255600), количество страниц - 536.

```sh
$result = createNewBook("Джордж Оруэлл", "1984, Скотный двор", 1584255600, 536);
```

В переменной $result будет значение:

```sh
true
```

Выполним getAllBooks и посмотрим результат предыдущей операции

```sh
Array
(
    [0] => Array
        (
            [id] => 1
            [title] => Check
            [author] => me
            [publication_date] => 1994-10-12
            [number_pages] => 324
        )

    [1] => Array
        (
            [id] => 2
            [title] => PROBA
            [author] => Check
            [publication_date] => 2015-12-12
            [number_pages] => 456
        )

    [2] => Array
        (
            [id] => 3
            [title] => Rugrats
            [author] => Andrew Sapkovski
            [publication_date] => 2010-01-06
            [number_pages] => 300
        )

    [3] => Array
        (
            [id] => 4
            [title] => Джордж Оруэлл
            [author] => 1984, Скотный двор
            [publication_date] => 2020-03-15
            [number_pages] => 536
        )

)
```

Элемент успешно добавлен в БД

